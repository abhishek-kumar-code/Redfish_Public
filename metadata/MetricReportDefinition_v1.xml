<?xml version="1.0" encoding="UTF-8"?>
<!---->
<!--################################################################################       -->
<!--# Redfish Schema:  MetricReportDefinition v1.0.0-->
<!--#                                                                                      -->
<!--# For a detailed change log, see the README file contained in the DSP8010 bundle,      -->
<!--# available at http://www.dmtf.org/standards/redfish                                   -->
<!--# Copyright 2014-2017 Distributed Management Task Force, Inc. (DMTF).                  -->
<!--# For the full DMTF copyright policy, see http://www.dmtf.org/about/policies/copyright -->
<!--################################################################################       -->
<!---->
<edmx:Edmx xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx" Version="4.0">

  <edmx:Reference Uri="http://docs.oasis-open.org/odata/odata/v4.0/errata03/csd01/complete/vocabularies/Org.OData.Core.V1.xml">
    <edmx:Include Namespace="Org.OData.Core.V1" Alias="OData"/>
  </edmx:Reference>
  <edmx:Reference Uri="http://redfish.dmtf.org/schemas/v1/Resource_v1.xml">
    <edmx:Include Namespace="Resource.v1_0_0"/>
  </edmx:Reference>
  <edmx:Reference Uri="http://redfish.dmtf.org/schemas/v1/Schedule_v1.xml">
    <edmx:Include Namespace="Schedule.v1_1_0"/>
  </edmx:Reference>
   <edmx:Reference Uri="http://redfish.dmtf.org/schemas/v1/Metric_v1.xml">
    <edmx:Include Namespace="Metric.v1_0_0"/>
  </edmx:Reference>
   <edmx:Reference Uri="http://redfish.dmtf.org/schemas/v1/MetricReport_v1.xml">
    <edmx:Include Namespace="MetricReport.v1_0_0"/>
  </edmx:Reference>

  <edmx:DataServices>
    <Schema xmlns="http://docs.oasis-open.org/odata/ns/edm" Namespace="MetricReportDefinition">
      <EntityType Name="MetricReportDefinition" BaseType="Resource.v1_0_0.Resource" Abstract="true">
        <Annotation Term="OData.Description" String="A metric Value."/>
        <Annotation Term="OData.LongDescription" String="Abstract metric Value."/>
      </EntityType>
   </Schema>

   <Schema xmlns="http://docs.oasis-open.org/odata/ns/edm" Namespace="MetricReportDefinition.v1_0_0">

      <EntityType Name="MetricReportDefinition" BaseType="MetricReportDefinition.MetricReportDefinition">
        <Annotation Term="OData.Description" String="A set of metrics that are collected periodically."/>
        <Annotation Term="OData.LongDescription" String="This resource specifies a set of metrics that shall be collected into a metric report."/>
        <Property Name="Name" Type="Edm.String" Nullable="false">
          <Annotation Term="OData.Permissions" EnumMember="OData.Permission/ReadWrite"/>
          <Annotation Term="OData.Description" String="Metric report name."/>
          <Annotation Term="OData.LongDescription" String="The value of this property shall be the name of this metric report."/>
        </Property>
        <Property Name="MetricReportType" Type="MetricReportDefinition.v1_0_0.MetricReportType">
          <Annotation Term="OData.Permissions" EnumMember="OData.Permission/ReadWrite"/>
          <Annotation Term="OData.Description" String="The collection type for the corresponding metric values."/>
          <Annotation Term="OData.LongDescription" String="The value shall specify the collection type for the corresponding metric values."/>
        </Property>
        <Property Name="Schedule" Type="Schedule.v1_1_0.Schedule">
          <Annotation Term="OData.Description" String="A schedule for collecting metric values."/>
          <Annotation Term="OData.LongDescription" String="If present, A metric values collected starting at each scheduled interval and for the time specified by Duration. No more than Schedule.MaxOccurrences values shall be collected for this metric.  If not present, the corresponding metric values shall be collected when the related metric report is retrieved."/>
        </Property>
        <Property Name="ReportActions" Type="Collection(MetricReportDefinition.v1_0_0.ReportActionsEnum)" Nullable="false">
          <Annotation Term="OData.Permissions" EnumMember="OData.Permission/Read"/>
          <Annotation Term="OData.Description" String="This property specifies what action is perform when a metric report resource is generated."/>
          <Annotation Term="OData.LongDescription" String="The value of this property shall specify the actions to perform when the metric report resource is generated. The options are transmit an event or create a metric report resource."/>
        </Property>
        <Property Name="ReportUpdates" TYPE="Collection(MetricReportDefinition.v1_0_0.ReportUpdatesEnum)" Nullable="false">
          <Annotation Term="OData.Permissions" EnumMember="OData.Permission/Read"/>
          <Annotation Term="OData.Description" String="This property specifies what action is perform when a metric report resource is updated.  Namely, overwrite, append, or create new report resource)"/>
          <Annotation Term="OData.LongDescription" String="The value of this property shall specify the action to perform when the metric report resource is updated and the ReportActions contains a value of 'Log'."/>
        </Property>
        <Property Name="Status" Type="Resource.Status" Nullable="false"/>
        <Property Name="Wildcards" Type="Collection(MetricReportDefinition.v1_0_0.Wildcard)">
          <Annotation Term="OData.Description" String="Wildcards used to replace values in MetricProperties array property."/>
          <Annotation Term="OData.LongDescription" String="The property shall contain an array of wildcards and their replacements strings, which are to appliced to the MetricProperties array property."/>
        </Property>
        <Property Name="MetricProperties" Type="Collection(Edm.String)">
          <Annotation Term="OData.Permissions" EnumMember="OData.Permission/ReadWrite"/>
          <Annotation Term="OData.Description" String="Specifies a list of metric properties to include in the metric report."/>
          <Annotation Term="OData.LongDescription" String="This property shall list the metric properties to include in the metric report. Each entry is URI with wildcards. The wildcards are enclosed by curly braces. The full list of metric properties to include in the metric report shall constructed by replacing wildcards with the value in the Wildcard property."/>
          <Annotation Term="OData.IsURL" String="After processing Wildcard replacement values, each value shall resolve to an OData conformant URI to a property in an entity."/>
        </Property>
        <Property Name="Metrics" Type="Collection(Metric.v1_0_0.Metric)">
          <Annotation Term="OData.Permissions" EnumMember="OData.Permission/ReadWrite"/>
          <Annotation Term="OData.Description" String="Specifies a list of metrics to include in the metric report. The metrics may include metric properties or calculations applied to a metric property."/>
          <Annotation Term="OData.LongDescription" String="The property shall specify a list of metrics to include in the metric report. The metrics may include metric properties or calculations applied to a metric property.."/>
        </Property>
        <NavigationProperty Name="MetricReport" Type="MetricReport.v1_0_0.MetricReport" Nullable="false" ContainsTarget="true" Partner="MetricReportDefinition">
          <Annotation Term="OData.Permissions" EnumMember="OData.Permission/Read"/>
          <Annotation Term="OData.Description" String="References the related MetricReport."/>
          <Annotation Term="OData.AutoExpandReferences"/>
        </NavigationProperty>

        <Property Name="Actions" Type="MetricReportDefinition.v1_0_0.Actions" Nullable="false">
          <Annotation Term="OData.Description" String="The available actions for this resource."/>
          <Annotation Term="OData.LongDescription" String="The Actions property shall contain the available actions for this resource."/>
        </Property>

      </EntityType>

      <ComplexType Name="Wildcard">
        <Annotation Term="OData.AdditionalProperties" Bool="false"/>
        <Annotation Term="OData.Description" String="Contains a list of wildcards and their substitution values."/>
        <Annotation Term="OData.LongDescription" String="Each wildcard shall have a corresponding entry in this list element.  Each entry shall specified the wildcard and its substitution values."/>
        <Property Name="Name" Type="Edm.String">
          <Annotation Term="OData.Permissions" EnumMember="OData.Permission/Read"/>
          <Annotation Term="OData.Description" String="The name of Wildcard."/>
          <Annotation Term="OData.LongDescription" String="This property shall contain a name for a Wildcard for a key."/>
        </Property>
        <Property Name="Keys" Type="Collection(Edm.String)">
          <Annotation Term="OData.Permissions" EnumMember="OData.Permission/Read"/>
          <Annotation Term="OData.Description" String="An array of Key values to substitute for the wildcard."/>
          <Annotation Term="OData.LongDescription" String="If the value is an empty string, then the server shall substitute every current key.  Each not empty key value shall be substituted for the wildcard."/>
        </Property>
      </ComplexType>

      <EnumType Name="MetricReportDefinitionType">
        <Annotation Term="OData.Description" String="Indicates when the metric report is generated."/>
        <Annotation Term="OData.LongDescription" String=  "The value shall specify when the metric report is generated."/>
        <Member Name="Periodic">
          <Annotation Term="OData.Description" String="The metric report is generated at a periodic time interval, specified in the Schedule property."/>
        </Member>
        <Member Name="OnChange">
          <Annotation Term="OData.Description" String="The metric report is generated when any of the metric values change."/>
        </Member>
        <Member Name="OnRequest">
          <Annotation Term="OData.Description" String="The metric report is generated when a HTTP GET is performed on the specified metric report."/>
        </Member>
      </EnumType>

      <EnumType Name="ReportActionsEnum">
        <Member Name="Log">
          <Annotation Term="OData.Description" String="Upon a trigger, record in a log."/>
        </Member>
        <Member Name="Transmit">
          <Annotation Term="OData.Description" String="Upon a trigger send an Alert event."/>
        </Member>
      </EnumType>

      <EnumType Name="ReportUpdatesEnum">
        <Member Name="Overwrite">
          <Annotation Term="OData.Description" String="When a metric report is updated, overwrite the specified metric report resource."/>
        </Member>
        <Member Name="Append">
          <Annotation Term="OData.Description" String="When a metric report is updated, append to the specified metric report resource."/>
        </Member>
        <Member Name="NewReport">
          <Annotation Term="OData.Description" String="When a metric report is updated, create a new metric report resource, whose resource name is the metric report resource name concatenated with the timestamp."/>
        </Member>
      </EnumType>

      <ComplexType Name="Actions">
        <Annotation Term="OData.AdditionalProperties" Bool="false"/>
        <Annotation Term="OData.Description" String="The available actions for this resource."/>
        <Annotation Term="OData.LongDescription" String="This type shall contain the available actions for this resource."/>
        <Property Name="Oem" Type="MetricReportDefinition.v1_0_0.OemActions" Nullable="false"/>
      </ComplexType>

      <ComplexType Name="OemActions">
        <Annotation Term="OData.AdditionalProperties" Bool="true"/>
        <Annotation Term="OData.Description" String="The available OEM specific actions for this resource."/>
        <Annotation Term="OData.LongDescription" String="This type shall contain any additional OEM actions for this resource."/>
      </ComplexType>

   </Schema>
  </edmx:DataServices>
</edmx:Edmx>
