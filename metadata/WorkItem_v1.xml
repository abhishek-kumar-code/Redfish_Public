<?xml version="1.0" encoding="UTF-8"?>
<!---->
<!--################################################################################       -->
<!--# Redfish Schema:  WorkItem  v1.2.0-->
<!--#                                                                                      -->
<!--# For a detailed change log, see the README file contained in the DSP8010 bundle,      -->
<!--# available at http://www.dmtf.org/standards/redfish                                   -->
<!--# Copyright 2014-2018 Distributed Management WorkItem Force, Inc. (DMTF).                  -->
<!--# For the full DMTF copyright policy, see http://www.dmtf.org/about/policies/copyright -->
<!--################################################################################       -->
<!---->
<edmx:Edmx xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx" Version="4.0">

  <edmx:Reference Uri="http://docs.oasis-open.org/odata/odata/v4.0/errata03/csd01/complete/vocabularies/Org.OData.Core.V1.xml">
    <edmx:Include Namespace="Org.OData.Core.V1" Alias="OData"/>
  </edmx:Reference>
  <edmx:Reference Uri="http://docs.oasis-open.org/odata/odata/v4.0/errata03/csd01/complete/vocabularies/Org.OData.Capabilities.V1.xml">
    <edmx:Include Namespace="Org.OData.Capabilities.V1" Alias="Capabilities"/>
  </edmx:Reference>
  <edmx:Reference Uri="http://redfish.dmtf.org/schemas/v1/Resource_v1.xml">
    <edmx:Include Namespace="Resource"/>
    <edmx:Include Namespace="Resource.v1_0_0"/>
  </edmx:Reference>
  <edmx:Reference Uri="http://redfish.dmtf.org/schemas/v1/Message_v1.xml">
    <edmx:Include Namespace="Message"/>
  </edmx:Reference>
  <edmx:Reference Uri="http://redfish.dmtf.org/schemas/v1/Task_v1.xml">
    <edmx:Include Namespace="Task"/>
  </edmx:Reference>
  <edmx:Reference Uri="http://redfish.dmtf.org/schemas/swordfish/v1/Schedule_v1.xml">
    <edmx:Include Namespace="Schedule"/>
  </edmx:Reference>

  <edmx:DataServices>

    <Schema xmlns="http://docs.oasis-open.org/odata/ns/edm" Namespace="WorkItem">

      <EntityType Name="WorkItem" BaseType="Resource.v1_0_0.Resource" Abstract="true">
        <Annotation Term="OData.Description" String="This resource defines a reusable unit of work that may be invoked on demand or via a schedule.  A specific invokation of this work is represented by a task.  "/>
        <Annotation Term="OData.LongDescription" String="This resource shall be used to represent a WorkItem for a Redfish implementation."/>
        <Annotation Term="Capabilities.InsertRestrictions">
          <Record>
            <PropertyValue Property="Insertable" Bool="false"/>
          </Record>
        </Annotation>
        <Annotation Term="Capabilities.UpdateRestrictions">
          <Record>
            <PropertyValue Property="Updatable" Bool="false"/>
          </Record>
        </Annotation>
        <Annotation Term="Capabilities.DeleteRestrictions">
          <Record>
            <PropertyValue Property="Deletable" Bool="true"/>
            <Annotation Term="OData.Description" String="WorkItems can be removed with a Delete operation."/>
          </Record>
        </Annotation>
      </EntityType>
      
      <ComplexType Name="PrerequisiteWorkItem">
        <Annotation Term="OData.Description" String="Describes a prerequisite work item."/>
        <Annotation Term="OData.LongDescription" String="Describes a prerequisite work item and conditions that must be met."/>
        <Property Name="TriggerHttpStatuses" Type="Collection(Edm.Integer)">
          <Annotation Term="OData.Permissions" EnumMember="OData.Permission/ReadWrite"/>
          <Annotation Term="OData.Description" String="If present, the prerequisite requirement is only met if the task representing the prerequisite work completes with one of the listed status codes."/>
          <Annotation Term="OData.LongDescription" String="If present, the prerequisite requirement is only met if the task representing the prerequisite work completes with one of the listed status codes.  If not present, any completion of the task representing the prerequisite work is sufficient to meet the requirement."/>
        </Property>
        <NavigationProperty Name="WorkItem" Type="WorkItem.WorkItem">
          <Annotation Term="OData.Permissions" EnumMember="OData.Permission/ReadWrite"/>
          <Annotation Term="OData.Description" String="A WorkItem representing work that must be performed before this work item may be invoked."/>
          <Annotation Term="OData.LongDescription" String="A WorkItem representing work that must be performed before this work item may be invoked."/>
          <Annotation Term="OData.AutoExpandReferences"/>
        </NavigationProperty>
      </ComplexType>
      
      <ComplexType Name="Actions">
        <Annotation Term="OData.AdditionalProperties" Bool="false"/>
        <Annotation Term="OData.Description" String="The available actions for this resource."/>
        <Annotation Term="OData.LongDescription" String="This type shall contain the available actions for this resource."/>
        <Property Name="Oem" Type="WorkItem.v1_1_0.OemActions" Nullable="false"/>
      </ComplexType>

      <ComplexType Name="OemActions">
        <Annotation Term="OData.AdditionalProperties" Bool="true"/>
        <Annotation Term="OData.Description" String="The available OEM specific actions for this resource."/>
        <Annotation Term="OData.LongDescription" String="This type shall contain any additional OEM actions for this resource."/>
      </ComplexType>
      
      <ComplexType Name="Links" BaseType="Resource.Links">
        <Annotation Term="OData.Description" String="Contains references to other resources that are related to this resource."/>
        <Annotation Term="OData.LongDescription" String="This type, as described by the Redfish Specification, shall contain references to resources that are related to, but not contained by (subordinate to), this resource."/>
      </ComplexType>
      
      <Action Name="Start" IsBound="true">
        <Parameter Name="WorkItem" Type="WorkItem.WorkItem"/>
      </Action>
      
    </Schema>

    <Schema xmlns="http://docs.oasis-open.org/odata/ns/edm" Namespace="WorkItem.v1_0_0">

      <EntityType Name="WorkItem" BaseType="WorkItem.WorkItem">
      
        <Property Name="Schedule" Type="Schedule.Schedule">
          <Annotation Term="OData.Permissions" EnumMember="OData.Permission/ReadWrite"/>
          <Annotation Term="OData.Description" String="Specifies when to invoke the specified work."/>
          <Annotation Term="OData.LongDescription" String="The value shall specifies when this work is performed."/>
        </Property>     
        <Property Name="HttpOperationRequest" Type="Task.HttpOperationRequest">
          <Annotation Term="OData.Permissions" EnumMember="OData.Permission/Read"/>
          <Annotation Term="OData.Description" String="If present, defines the request that invoked this task."/>
          <Annotation Term="OData.LongDescription" String="If present, the values shall define the request that invoked this task."/>
        </Property> 
        <Property Name="PrerequisiteWorkItems" Type="Collection(WorkItem.PrerequisiteWorkItem)">
          <Annotation Term="OData.Permissions" EnumMember="OData.Permission/ReadWrite"/>
          <Annotation Term="OData.Description" String="A collection of WorkItems representing work to be performed before this work item may be invoked."/>
          <Annotation Term="OData.LongDescription" String="A collection of WorkItems representing work that must complete with one of the values in the TriggerHttpStatuses array before this work item may be invoked."/>
          <Annotation Term="OData.AutoExpandReferences"/>
        </Property>
        <Property Name="Actions" Type="WorkItem.v1_1_0.Actions" Nullable="false">
          <Annotation Term="OData.Description" String="The available actions for this resource."/>
          <Annotation Term="OData.LongDescription" String="The Actions property shall contain the available actions for this resource."/>
        </Property>         
        <Property Name="Links" Type="WorkItem.V1_0_0.Links" Nullable="false">
          <Annotation Term="OData.Description" String="Contains references to other resources that are related to this resource."/>
          <Annotation Term="OData.LongDescription" String="The Links property, as described by the Redfish Specification, shall contain references to resources that are related to, but not contained by (subordinate to), this resource."/>
        </Property>
      </EntityType>
        
      <ComplexType Name="Links" BaseType="WorkItem.Links">        
        <NavigationProperty Name="Tasks" Type="Collection(Task.Task)">
          <Annotation Term="OData.Permissions" EnumMember="OData.Permission/Read"/>
          <Annotation Term="OData.Description" String="A collection of tasks representing active invocations of this work."/>
          <Annotation Term="OData.LongDescription" String="A collection of tasks, each shall represent an active invocation of this work."/>
          <Annotation Term="OData.AutoExpandReferences"/>
        </NavigationProperty>
        <NavigationProperty Name="ConcurrentWorkItems" Type="Collection(WorkItem.WorkItem)">
          <Annotation Term="OData.Permissions" EnumMember="OData.Permission/ReadWrite"/>
          <Annotation Term="OData.Description" String="A collection of WorkItems representing additional work to be invoked concurrently with this work."/>
          <Annotation Term="OData.LongDescription" String="A collection of WorkItems, each representign additional work that shall be invoked when this work item is started."/>
          <Annotation Term="OData.AutoExpandReferences"/>
        </NavigationProperty>
        <NavigationProperty Name="DependentWorkItems" Type="Collection(WorkItem.PrerequisiteWorkItem)">
          <Annotation Term="OData.Permissions" EnumMember="OData.Permission/ReadWrite"/>
          <Annotation Term="OData.Description" String="A collection of WorkItems representing additional work to be performed after this work item completes."/>
          <Annotation Term="OData.LongDescription" String="A collection of WorkItems representing additional work that shall be started after this work completes if this work completes with one of the values in the TriggerHttpStatuses array."/>
          <Annotation Term="OData.AutoExpandReferences"/>
        </NavigationProperty>
      </ComplexType>
    </Schema>

  </edmx:DataServices>
</edmx:Edmx>
